/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var A=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var W=Object.prototype.hasOwnProperty;var V=(v,f)=>{for(var e in f)A(v,e,{get:f[e],enumerable:!0})},j=(v,f,e,t)=>{if(f&&typeof f=="object"||typeof f=="function")for(let i of M(f))!W.call(v,i)&&i!==e&&A(v,i,{get:()=>f[i],enumerable:!(t=B(f,i))||t.enumerable});return v};var O=v=>j(A({},"__esModule",{value:!0}),v);var q={};V(q,{default:()=>k});module.exports=O(q);var g=require("obsidian");var w=require("obsidian");var C=require("obsidian");var S={commands:{updateAll:"Set feature properties in all files (add or update)",updateAllNoThumbnail:"Set featured images in all files (add or update)",updateFolder:"Set feature properties in current folder (add or update)",updateFolderNoThumbnail:"Set featured images in current folder (add or update)",removeAll:"Remove feature properties in all files",removeAllNoThumbnail:"Remove featured images in all files",cleanupUnused:"Remove unused downloaded images and thumbnails",rerenderThumbnails:"Re-render all resized thumbnails"},settings:{headings:{advanced:"Advanced"},items:{showNotifications:{name:"Show notifications",desc:"Show notifications when the featured image is set, updated or removed."},frontmatterProperty:{name:"Frontmatter property",desc:"The name of the frontmatter property to update with the featured image"},thumbnailsFolder:{name:"Thumbnails folder",desc:"Folder for downloaded thumbnails and resized images. Subfolders will be created automatically for different image types."},excludedFolders:{name:"Excluded folders",desc:"Comma separated list of folders to exclude from the featured image plugin."},resizeFeatureImage:{name:"Resize feature image",desc:"Resize feature image for better performance in scrolling lists or plugins like Notebook Navigator."},resizedThumbnailProperty:{name:"Resized thumbnail property name",desc:"The name of the frontmatter property to store the resized thumbnail path.",placeholder:"thumbnail"},maxResizedWidth:{name:"Max resized width",desc:"Maximum width of the resized thumbnail in pixels. Use 0 for no width restriction.",placeholder:"128"},maxResizedHeight:{name:"Max resized height",desc:"Maximum height of the resized thumbnail in pixels. Use 0 for no height restriction.",placeholder:"128"},fillResizedDimensions:{name:"Fill resized dimensions",desc:"When enabled, resized thumbnails will be exactly the size specified by max width and height, maintaining aspect ratio and cropping to fill the dimensions."},verticalAlignment:{name:"Vertical alignment",desc:"Choose the vertical alignment for cropped images.",options:{top:"Top",center:"Center",bottom:"Bottom"}},horizontalAlignment:{name:"Horizontal alignment",desc:"Choose the horizontal alignment for cropped images.",options:{left:"Left",center:"Center",right:"Right"}},showAdvancedSettings:{name:"Show advanced settings",desc:"Toggle to show or hide advanced configuration options"},mediaLinkFormat:{name:"Media link format",desc:"Choose how to format the featured image property in frontmatter."},onlyUpdateExisting:{name:"Only update if frontmatter property exists",desc:"Enable this to only update the frontmatter property if it already exists."},keepEmptyProperty:{name:"Keep empty property",desc:"When enabled, the frontmatter property will be kept but set to an empty string if no featured image is found. When disabled, the property will be removed."},preserveTemplateImages:{name:"Don't clear existing property",desc:"When enabled, keeps the existing featured image property if no image is found in the document. When disabled, clears or removes the property when no image is detected (depending on the 'Keep empty property' setting)."},requireExclamationForYouTube:{name:"Require exclamation mark for YouTube thumbnails",desc:"If enabled, only YouTube links prefixed with an exclamation mark will be considered for thumbnail download."},downloadWebP:{name:"Download WebP",desc:"Download WebP versions of images from YouTube if available, otherwise download JPG."},localImageExtensions:{name:"Local image extensions",desc:"Comma-separated list of image file extensions to search for in documents.",placeholder:"png,jpg,jpeg,gif,webp"},debugMode:{name:"Debug mode",desc:"Enable debug mode to log detailed information to the console."},dryRun:{name:"Dry run",desc:"Enable dry run to prevent any changes from being made to your files."}},info:{rerenderTip:'Tip: After changing alignment or dimension settings, run the command "Re-render all resized thumbnails" from the command palette to update existing thumbnails with the new settings.'}},notices:{updatingAllFiles:"Updating featured images in all files...",updatingFolder:"Updating featured images in current folder...",removingAllImages:"Removing featured images from all files...",cleaningUpUnused:"Cleaning up unused images...",rerenderingThumbnails:"Re-rendering all thumbnails...",completed:"Completed",noActiveFile:"No active file",errorOccurred:"An error occurred",featureSet:"Feature image set",featureUpdated:"Feature image updated",featureRemoved:"Feature image removed",featureUnchanged:"Feature image unchanged",dryRunEnabled:"Dry run enabled - no changes made",filesProcessed:"{count} files processed",imagesDeleted:"{count} images deleted",thumbnailsRerendered:"{count} thumbnails re-rendered"}};var P={commands:{updateAll:"Feature-Eigenschaften in allen Dateien setzen (hinzuf\xFCgen oder aktualisieren)",updateAllNoThumbnail:"Featured Images in allen Dateien setzen (hinzuf\xFCgen oder aktualisieren)",updateFolder:"Feature-Eigenschaften im aktuellen Ordner setzen (hinzuf\xFCgen oder aktualisieren)",updateFolderNoThumbnail:"Featured Images im aktuellen Ordner setzen (hinzuf\xFCgen oder aktualisieren)",removeAll:"Feature-Eigenschaften in allen Dateien entfernen",removeAllNoThumbnail:"Featured Images in allen Dateien entfernen",cleanupUnused:"Ungenutzte heruntergeladene Bilder und Vorschaubilder entfernen",rerenderThumbnails:"Alle verkleinerten Vorschaubilder neu rendern"},settings:{headings:{advanced:"Erweitert"},items:{showNotifications:{name:"Benachrichtigungen anzeigen",desc:"Benachrichtigungen anzeigen, wenn das Featured Image gesetzt, aktualisiert oder entfernt wird."},frontmatterProperty:{name:"Frontmatter-Eigenschaft",desc:"Der Name der Frontmatter-Eigenschaft, die mit dem Featured Image aktualisiert werden soll"},thumbnailsFolder:{name:"Vorschaubilder-Ordner",desc:"Ordner f\xFCr heruntergeladene Vorschaubilder und verkleinerte Bilder. Unterordner werden automatisch f\xFCr verschiedene Bildtypen erstellt."},excludedFolders:{name:"Ausgeschlossene Ordner",desc:"Kommagetrennte Liste von Ordnern, die vom Featured Image Plugin ausgeschlossen werden sollen."},resizeFeatureImage:{name:"Feature-Bild verkleinern",desc:"Feature-Bild f\xFCr bessere Leistung in scrollenden Listen oder Plugins wie Notebook Navigator verkleinern."},resizedThumbnailProperty:{name:"Name der verkleinerten Vorschaubild-Eigenschaft",desc:"Der Name der Frontmatter-Eigenschaft zum Speichern des verkleinerten Vorschaubild-Pfads.",placeholder:"thumbnail"},maxResizedWidth:{name:"Maximale verkleinerte Breite",desc:"Maximale Breite des verkleinerten Vorschaubilds in Pixeln. 0 f\xFCr keine Breitenbeschr\xE4nkung verwenden.",placeholder:"128"},maxResizedHeight:{name:"Maximale verkleinerte H\xF6he",desc:"Maximale H\xF6he des verkleinerten Vorschaubilds in Pixeln. 0 f\xFCr keine H\xF6henbeschr\xE4nkung verwenden.",placeholder:"128"},fillResizedDimensions:{name:"Verkleinerte Dimensionen ausf\xFCllen",desc:"Wenn aktiviert, haben verkleinerte Vorschaubilder genau die durch maximale Breite und H\xF6he angegebene Gr\xF6\xDFe, wobei das Seitenverh\xE4ltnis beibehalten und zum Ausf\xFCllen der Dimensionen zugeschnitten wird."},verticalAlignment:{name:"Vertikale Ausrichtung",desc:"W\xE4hlen Sie die vertikale Ausrichtung f\xFCr zugeschnittene Bilder.",options:{top:"Oben",center:"Mitte",bottom:"Unten"}},horizontalAlignment:{name:"Horizontale Ausrichtung",desc:"W\xE4hlen Sie die horizontale Ausrichtung f\xFCr zugeschnittene Bilder.",options:{left:"Links",center:"Mitte",right:"Rechts"}},showAdvancedSettings:{name:"Erweiterte Einstellungen anzeigen",desc:"Erweiterte Konfigurationsoptionen ein- oder ausblenden"},mediaLinkFormat:{name:"Medienlink-Format",desc:"W\xE4hlen Sie, wie die Featured Image Eigenschaft im Frontmatter formatiert werden soll."},onlyUpdateExisting:{name:"Nur aktualisieren, wenn Frontmatter-Eigenschaft existiert",desc:"Aktivieren Sie dies, um die Frontmatter-Eigenschaft nur zu aktualisieren, wenn sie bereits existiert."},keepEmptyProperty:{name:"Leere Eigenschaft beibehalten",desc:"Wenn aktiviert, wird die Frontmatter-Eigenschaft beibehalten, aber auf einen leeren String gesetzt, wenn kein Featured Image gefunden wird. Wenn deaktiviert, wird die Eigenschaft entfernt."},preserveTemplateImages:{name:"Bestehende Eigenschaft nicht l\xF6schen",desc:'Wenn aktiviert, wird die bestehende Featured Image Eigenschaft beibehalten, wenn kein Bild im Dokument gefunden wird. Wenn deaktiviert, wird die Eigenschaft gel\xF6scht oder entfernt, wenn kein Bild erkannt wird (abh\xE4ngig von der Einstellung "Leere Eigenschaft beibehalten").'},requireExclamationForYouTube:{name:"Ausrufezeichen f\xFCr YouTube-Vorschaubilder erforderlich",desc:"Wenn aktiviert, werden nur YouTube-Links mit vorangestelltem Ausrufezeichen f\xFCr den Vorschaubild-Download ber\xFCcksichtigt."},downloadWebP:{name:"WebP herunterladen",desc:"WebP-Versionen von Bildern von YouTube herunterladen, falls verf\xFCgbar, andernfalls JPG herunterladen."},localImageExtensions:{name:"Lokale Bilderweiterungen",desc:"Kommagetrennte Liste von Bilddateierweiterungen, nach denen in Dokumenten gesucht werden soll.",placeholder:"png,jpg,jpeg,gif,webp"},debugMode:{name:"Debug-Modus",desc:"Debug-Modus aktivieren, um detaillierte Informationen in der Konsole zu protokollieren."},dryRun:{name:"Testlauf",desc:"Testlauf aktivieren, um zu verhindern, dass \xC4nderungen an Ihren Dateien vorgenommen werden."}},info:{rerenderTip:'Tipp: Nach dem \xC4ndern der Ausrichtungs- oder Dimensionseinstellungen f\xFChren Sie den Befehl "Alle verkleinerten Vorschaubilder neu rendern" aus der Befehlspalette aus, um vorhandene Vorschaubilder mit den neuen Einstellungen zu aktualisieren.'}},notices:{updatingAllFiles:"Featured Images in allen Dateien werden aktualisiert...",updatingFolder:"Featured Images im aktuellen Ordner werden aktualisiert...",removingAllImages:"Featured Images aus allen Dateien werden entfernt...",cleaningUpUnused:"Ungenutzte Bilder werden bereinigt...",rerenderingThumbnails:"Alle Vorschaubilder werden neu gerendert...",completed:"Abgeschlossen",noActiveFile:"Keine aktive Datei",errorOccurred:"Ein Fehler ist aufgetreten",featureSet:"Feature-Bild gesetzt",featureUpdated:"Feature-Bild aktualisiert",featureRemoved:"Feature-Bild entfernt",featureUnchanged:"Feature-Bild unver\xE4ndert",dryRunEnabled:"Testlauf aktiviert - keine \xC4nderungen vorgenommen",filesProcessed:"{count} Dateien verarbeitet",imagesDeleted:"{count} Bilder gel\xF6scht",thumbnailsRerendered:"{count} Vorschaubilder neu gerendert"}};var I={commands:{updateAll:"Establecer propiedades de imagen destacada en todos los archivos (agregar o actualizar)",updateAllNoThumbnail:"Establecer im\xE1genes destacadas en todos los archivos (agregar o actualizar)",updateFolder:"Establecer propiedades de imagen destacada en la carpeta actual (agregar o actualizar)",updateFolderNoThumbnail:"Establecer im\xE1genes destacadas en la carpeta actual (agregar o actualizar)",removeAll:"Eliminar propiedades de imagen destacada en todos los archivos",removeAllNoThumbnail:"Eliminar im\xE1genes destacadas en todos los archivos",cleanupUnused:"Eliminar im\xE1genes descargadas y miniaturas no utilizadas",rerenderThumbnails:"Volver a renderizar todas las miniaturas redimensionadas"},settings:{headings:{advanced:"Avanzado"},items:{showNotifications:{name:"Mostrar notificaciones",desc:"Mostrar notificaciones cuando la imagen destacada se establece, actualiza o elimina."},frontmatterProperty:{name:"Propiedad de frontmatter",desc:"El nombre de la propiedad de frontmatter para actualizar con la imagen destacada"},thumbnailsFolder:{name:"Carpeta de miniaturas",desc:"Carpeta para miniaturas descargadas e im\xE1genes redimensionadas. Se crear\xE1n autom\xE1ticamente subcarpetas para diferentes tipos de im\xE1genes."},excludedFolders:{name:"Carpetas excluidas",desc:"Lista separada por comas de carpetas a excluir del plugin de imagen destacada."},resizeFeatureImage:{name:"Redimensionar imagen destacada",desc:"Redimensionar imagen destacada para mejor rendimiento en listas desplazables o plugins como Notebook Navigator."},resizedThumbnailProperty:{name:"Nombre de propiedad de miniatura redimensionada",desc:"El nombre de la propiedad de frontmatter para almacenar la ruta de la miniatura redimensionada.",placeholder:"thumbnail"},maxResizedWidth:{name:"Ancho m\xE1ximo redimensionado",desc:"Ancho m\xE1ximo de la miniatura redimensionada en p\xEDxeles. Use 0 para sin restricci\xF3n de ancho.",placeholder:"128"},maxResizedHeight:{name:"Altura m\xE1xima redimensionada",desc:"Altura m\xE1xima de la miniatura redimensionada en p\xEDxeles. Use 0 para sin restricci\xF3n de altura.",placeholder:"128"},fillResizedDimensions:{name:"Llenar dimensiones redimensionadas",desc:"Cuando est\xE1 habilitado, las miniaturas redimensionadas tendr\xE1n exactamente el tama\xF1o especificado por el ancho y la altura m\xE1ximos, manteniendo la relaci\xF3n de aspecto y recortando para llenar las dimensiones."},verticalAlignment:{name:"Alineaci\xF3n vertical",desc:"Elija la alineaci\xF3n vertical para im\xE1genes recortadas.",options:{top:"Superior",center:"Centro",bottom:"Inferior"}},horizontalAlignment:{name:"Alineaci\xF3n horizontal",desc:"Elija la alineaci\xF3n horizontal para im\xE1genes recortadas.",options:{left:"Izquierda",center:"Centro",right:"Derecha"}},showAdvancedSettings:{name:"Mostrar configuraci\xF3n avanzada",desc:"Alternar para mostrar u ocultar opciones de configuraci\xF3n avanzada"},mediaLinkFormat:{name:"Formato de enlace de medios",desc:"Elija c\xF3mo formatear la propiedad de imagen destacada en el frontmatter."},onlyUpdateExisting:{name:"Solo actualizar si existe la propiedad de frontmatter",desc:"Habilite esto para actualizar solo la propiedad de frontmatter si ya existe."},keepEmptyProperty:{name:"Mantener propiedad vac\xEDa",desc:"Cuando est\xE1 habilitado, la propiedad de frontmatter se mantendr\xE1 pero se establecer\xE1 en una cadena vac\xEDa si no se encuentra una imagen destacada. Cuando est\xE1 deshabilitado, la propiedad se eliminar\xE1."},preserveTemplateImages:{name:"No borrar propiedad existente",desc:'Cuando est\xE1 habilitado, mantiene la propiedad de imagen destacada existente si no se encuentra ninguna imagen en el documento. Cuando est\xE1 deshabilitado, borra o elimina la propiedad cuando no se detecta ninguna imagen (dependiendo de la configuraci\xF3n "Mantener propiedad vac\xEDa").'},requireExclamationForYouTube:{name:"Requerir signo de exclamaci\xF3n para miniaturas de YouTube",desc:"Si est\xE1 habilitado, solo los enlaces de YouTube con prefijo de signo de exclamaci\xF3n se considerar\xE1n para la descarga de miniaturas."},downloadWebP:{name:"Descargar WebP",desc:"Descargar versiones WebP de im\xE1genes de YouTube si est\xE1n disponibles, de lo contrario descargar JPG."},localImageExtensions:{name:"Extensiones de imagen local",desc:"Lista separada por comas de extensiones de archivo de imagen para buscar en documentos.",placeholder:"png,jpg,jpeg,gif,webp"},debugMode:{name:"Modo de depuraci\xF3n",desc:"Habilitar el modo de depuraci\xF3n para registrar informaci\xF3n detallada en la consola."},dryRun:{name:"Ejecuci\xF3n de prueba",desc:"Habilitar la ejecuci\xF3n de prueba para evitar que se realicen cambios en sus archivos."}},info:{rerenderTip:'Consejo: Despu\xE9s de cambiar la configuraci\xF3n de alineaci\xF3n o dimensiones, ejecute el comando "Volver a renderizar todas las miniaturas redimensionadas" desde la paleta de comandos para actualizar las miniaturas existentes con la nueva configuraci\xF3n.'}},notices:{updatingAllFiles:"Actualizando im\xE1genes destacadas en todos los archivos...",updatingFolder:"Actualizando im\xE1genes destacadas en la carpeta actual...",removingAllImages:"Eliminando im\xE1genes destacadas de todos los archivos...",cleaningUpUnused:"Limpiando im\xE1genes no utilizadas...",rerenderingThumbnails:"Volviendo a renderizar todas las miniaturas...",completed:"Completado",noActiveFile:"Sin archivo activo",errorOccurred:"Ocurri\xF3 un error",featureSet:"Imagen destacada establecida",featureUpdated:"Imagen destacada actualizada",featureRemoved:"Imagen destacada eliminada",featureUnchanged:"Imagen destacada sin cambios",dryRunEnabled:"Ejecuci\xF3n de prueba habilitada - no se realizaron cambios",filesProcessed:"{count} archivos procesados",imagesDeleted:"{count} im\xE1genes eliminadas",thumbnailsRerendered:"{count} miniaturas re-renderizadas"}};var U={commands:{updateAll:"D\xE9finir les propri\xE9t\xE9s d'image vedette dans tous les fichiers (ajouter ou mettre \xE0 jour)",updateAllNoThumbnail:"D\xE9finir les images vedettes dans tous les fichiers (ajouter ou mettre \xE0 jour)",updateFolder:"D\xE9finir les propri\xE9t\xE9s d'image vedette dans le dossier actuel (ajouter ou mettre \xE0 jour)",updateFolderNoThumbnail:"D\xE9finir les images vedettes dans le dossier actuel (ajouter ou mettre \xE0 jour)",removeAll:"Supprimer les propri\xE9t\xE9s d'image vedette dans tous les fichiers",removeAllNoThumbnail:"Supprimer les images vedettes dans tous les fichiers",cleanupUnused:"Supprimer les images t\xE9l\xE9charg\xE9es et miniatures inutilis\xE9es",rerenderThumbnails:"Re-g\xE9n\xE9rer toutes les miniatures redimensionn\xE9es"},settings:{headings:{advanced:"Avanc\xE9"},items:{showNotifications:{name:"Afficher les notifications",desc:"Afficher les notifications lorsque l'image vedette est d\xE9finie, mise \xE0 jour ou supprim\xE9e."},frontmatterProperty:{name:"Propri\xE9t\xE9 frontmatter",desc:"Le nom de la propri\xE9t\xE9 frontmatter \xE0 mettre \xE0 jour avec l'image vedette"},thumbnailsFolder:{name:"Dossier des miniatures",desc:"Dossier pour les miniatures t\xE9l\xE9charg\xE9es et les images redimensionn\xE9es. Des sous-dossiers seront cr\xE9\xE9s automatiquement pour diff\xE9rents types d'images."},excludedFolders:{name:"Dossiers exclus",desc:"Liste de dossiers s\xE9par\xE9s par des virgules \xE0 exclure du plugin d'image vedette."},resizeFeatureImage:{name:"Redimensionner l'image vedette",desc:"Redimensionner l'image vedette pour de meilleures performances dans les listes d\xE9filantes ou les plugins comme Notebook Navigator."},resizedThumbnailProperty:{name:"Nom de la propri\xE9t\xE9 de miniature redimensionn\xE9e",desc:"Le nom de la propri\xE9t\xE9 frontmatter pour stocker le chemin de la miniature redimensionn\xE9e.",placeholder:"thumbnail"},maxResizedWidth:{name:"Largeur maximale redimensionn\xE9e",desc:"Largeur maximale de la miniature redimensionn\xE9e en pixels. Utilisez 0 pour aucune restriction de largeur.",placeholder:"128"},maxResizedHeight:{name:"Hauteur maximale redimensionn\xE9e",desc:"Hauteur maximale de la miniature redimensionn\xE9e en pixels. Utilisez 0 pour aucune restriction de hauteur.",placeholder:"128"},fillResizedDimensions:{name:"Remplir les dimensions redimensionn\xE9es",desc:"Lorsque activ\xE9, les miniatures redimensionn\xE9es auront exactement la taille sp\xE9cifi\xE9e par la largeur et la hauteur maximales, en maintenant le rapport d'aspect et en recadrant pour remplir les dimensions."},verticalAlignment:{name:"Alignement vertical",desc:"Choisissez l'alignement vertical pour les images recadr\xE9es.",options:{top:"Haut",center:"Centre",bottom:"Bas"}},horizontalAlignment:{name:"Alignement horizontal",desc:"Choisissez l'alignement horizontal pour les images recadr\xE9es.",options:{left:"Gauche",center:"Centre",right:"Droite"}},showAdvancedSettings:{name:"Afficher les param\xE8tres avanc\xE9s",desc:"Basculer pour afficher ou masquer les options de configuration avanc\xE9es"},mediaLinkFormat:{name:"Format de lien m\xE9dia",desc:"Choisissez comment formater la propri\xE9t\xE9 d'image vedette dans le frontmatter."},onlyUpdateExisting:{name:"Mettre \xE0 jour uniquement si la propri\xE9t\xE9 frontmatter existe",desc:"Activez ceci pour mettre \xE0 jour uniquement la propri\xE9t\xE9 frontmatter si elle existe d\xE9j\xE0."},keepEmptyProperty:{name:"Conserver la propri\xE9t\xE9 vide",desc:"Lorsque activ\xE9, la propri\xE9t\xE9 frontmatter sera conserv\xE9e mais d\xE9finie sur une cha\xEEne vide si aucune image vedette n'est trouv\xE9e. Lorsque d\xE9sactiv\xE9, la propri\xE9t\xE9 sera supprim\xE9e."},preserveTemplateImages:{name:"Ne pas effacer la propri\xE9t\xE9 existante",desc:`Lorsque activ\xE9, conserve la propri\xE9t\xE9 d'image vedette existante si aucune image n'est trouv\xE9e dans le document. Lorsque d\xE9sactiv\xE9, efface ou supprime la propri\xE9t\xE9 lorsqu'aucune image n'est d\xE9tect\xE9e (selon le param\xE8tre "Conserver la propri\xE9t\xE9 vide").`},requireExclamationForYouTube:{name:"Exiger un point d'exclamation pour les miniatures YouTube",desc:"Si activ\xE9, seuls les liens YouTube pr\xE9fix\xE9s d'un point d'exclamation seront consid\xE9r\xE9s pour le t\xE9l\xE9chargement de miniatures."},downloadWebP:{name:"T\xE9l\xE9charger WebP",desc:"T\xE9l\xE9charger les versions WebP des images de YouTube si disponibles, sinon t\xE9l\xE9charger JPG."},localImageExtensions:{name:"Extensions d'image locales",desc:"Liste d'extensions de fichiers image s\xE9par\xE9es par des virgules \xE0 rechercher dans les documents.",placeholder:"png,jpg,jpeg,gif,webp"},debugMode:{name:"Mode d\xE9bogage",desc:"Activer le mode d\xE9bogage pour enregistrer des informations d\xE9taill\xE9es dans la console."},dryRun:{name:"Ex\xE9cution \xE0 blanc",desc:"Activer l'ex\xE9cution \xE0 blanc pour emp\xEAcher toute modification de vos fichiers."}},info:{rerenderTip:`Astuce : Apr\xE8s avoir modifi\xE9 les param\xE8tres d'alignement ou de dimensions, ex\xE9cutez la commande "Re-g\xE9n\xE9rer toutes les miniatures redimensionn\xE9es" depuis la palette de commandes pour mettre \xE0 jour les miniatures existantes avec les nouveaux param\xE8tres.`}},notices:{updatingAllFiles:"Mise \xE0 jour des images vedettes dans tous les fichiers...",updatingFolder:"Mise \xE0 jour des images vedettes dans le dossier actuel...",removingAllImages:"Suppression des images vedettes de tous les fichiers...",cleaningUpUnused:"Nettoyage des images inutilis\xE9es...",rerenderingThumbnails:"Re-g\xE9n\xE9ration de toutes les miniatures...",completed:"Termin\xE9",noActiveFile:"Aucun fichier actif",errorOccurred:"Une erreur s'est produite",featureSet:"Image vedette d\xE9finie",featureUpdated:"Image vedette mise \xE0 jour",featureRemoved:"Image vedette supprim\xE9e",featureUnchanged:"Image vedette inchang\xE9e",dryRunEnabled:"Ex\xE9cution \xE0 blanc activ\xE9e - aucune modification effectu\xE9e",filesProcessed:"{count} fichiers trait\xE9s",imagesDeleted:"{count} images supprim\xE9es",thumbnailsRerendered:"{count} miniatures re-g\xE9n\xE9r\xE9es"}};var D={commands:{updateAll:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",updateAllNoThumbnail:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",updateFolder:"\u73FE\u5728\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",updateFolderNoThumbnail:"\u73FE\u5728\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u8A2D\u5B9A\uFF08\u8FFD\u52A0\u307E\u305F\u306F\u66F4\u65B0\uFF09",removeAll:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u304B\u3089\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u524A\u9664",removeAllNoThumbnail:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u304B\u3089\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u524A\u9664",cleanupUnused:"\u672A\u4F7F\u7528\u306E\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u753B\u50CF\u3068\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u524A\u9664",rerenderThumbnails:"\u3059\u3079\u3066\u306E\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0"},settings:{headings:{advanced:"\u8A73\u7D30\u8A2D\u5B9A"},items:{showNotifications:{name:"\u901A\u77E5\u3092\u8868\u793A",desc:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u304C\u8A2D\u5B9A\u3001\u66F4\u65B0\u3001\u524A\u9664\u3055\u308C\u305F\u3068\u304D\u306B\u901A\u77E5\u3092\u8868\u793A\u3057\u307E\u3059\u3002"},frontmatterProperty:{name:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3",desc:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3067\u66F4\u65B0\u3059\u308B\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306E\u540D\u524D"},thumbnailsFolder:{name:"\u30B5\u30E0\u30CD\u30A4\u30EB\u30D5\u30A9\u30EB\u30C0",desc:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u3068\u30EA\u30B5\u30A4\u30BA\u3057\u305F\u753B\u50CF\u7528\u306E\u30D5\u30A9\u30EB\u30C0\u3002\u7570\u306A\u308B\u753B\u50CF\u30BF\u30A4\u30D7\u7528\u306E\u30B5\u30D6\u30D5\u30A9\u30EB\u30C0\u304C\u81EA\u52D5\u7684\u306B\u4F5C\u6210\u3055\u308C\u307E\u3059\u3002"},excludedFolders:{name:"\u9664\u5916\u30D5\u30A9\u30EB\u30C0",desc:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30E9\u30B0\u30A4\u30F3\u304B\u3089\u9664\u5916\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u30AB\u30F3\u30DE\u533A\u5207\u308A\u30EA\u30B9\u30C8\u3002"},resizeFeatureImage:{name:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u30EA\u30B5\u30A4\u30BA",desc:"\u30B9\u30AF\u30ED\u30FC\u30EB\u30EA\u30B9\u30C8\u3084Notebook Navigator\u306A\u3069\u306E\u30D7\u30E9\u30B0\u30A4\u30F3\u3067\u306E\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u5411\u4E0A\u306E\u305F\u3081\u3001\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u30EA\u30B5\u30A4\u30BA\u3057\u307E\u3059\u3002"},resizedThumbnailProperty:{name:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u30D7\u30ED\u30D1\u30C6\u30A3\u540D",desc:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u30D1\u30B9\u3092\u4FDD\u5B58\u3059\u308B\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306E\u540D\u524D\u3002",placeholder:"thumbnail"},maxResizedWidth:{name:"\u6700\u5927\u30EA\u30B5\u30A4\u30BA\u5E45",desc:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u306E\u6700\u5927\u5E45\uFF08\u30D4\u30AF\u30BB\u30EB\uFF09\u3002\u5E45\u5236\u9650\u306A\u3057\u306E\u5834\u5408\u306F0\u3092\u4F7F\u7528\u3002",placeholder:"128"},maxResizedHeight:{name:"\u6700\u5927\u30EA\u30B5\u30A4\u30BA\u9AD8\u3055",desc:"\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u306E\u6700\u5927\u9AD8\u3055\uFF08\u30D4\u30AF\u30BB\u30EB\uFF09\u3002\u9AD8\u3055\u5236\u9650\u306A\u3057\u306E\u5834\u5408\u306F0\u3092\u4F7F\u7528\u3002",placeholder:"128"},fillResizedDimensions:{name:"\u30EA\u30B5\u30A4\u30BA\u5BF8\u6CD5\u3092\u6E80\u305F\u3059",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u306F\u6700\u5927\u5E45\u3068\u9AD8\u3055\u3067\u6307\u5B9A\u3055\u308C\u305F\u30B5\u30A4\u30BA\u306B\u306A\u308A\u3001\u30A2\u30B9\u30DA\u30AF\u30C8\u6BD4\u3092\u7DAD\u6301\u3057\u3001\u5BF8\u6CD5\u3092\u6E80\u305F\u3059\u3088\u3046\u306B\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u307E\u3059\u3002"},verticalAlignment:{name:"\u5782\u76F4\u65B9\u5411\u306E\u914D\u7F6E",desc:"\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u753B\u50CF\u306E\u5782\u76F4\u65B9\u5411\u306E\u914D\u7F6E\u3092\u9078\u629E\u3057\u307E\u3059\u3002",options:{top:"\u4E0A",center:"\u4E2D\u592E",bottom:"\u4E0B"}},horizontalAlignment:{name:"\u6C34\u5E73\u65B9\u5411\u306E\u914D\u7F6E",desc:"\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u753B\u50CF\u306E\u6C34\u5E73\u65B9\u5411\u306E\u914D\u7F6E\u3092\u9078\u629E\u3057\u307E\u3059\u3002",options:{left:"\u5DE6",center:"\u4E2D\u592E",right:"\u53F3"}},showAdvancedSettings:{name:"\u8A73\u7D30\u8A2D\u5B9A\u3092\u8868\u793A",desc:"\u8A73\u7D30\u306A\u8A2D\u5B9A\u30AA\u30D7\u30B7\u30E7\u30F3\u306E\u8868\u793A/\u975E\u8868\u793A\u3092\u5207\u308A\u66FF\u3048"},mediaLinkFormat:{name:"\u30E1\u30C7\u30A3\u30A2\u30EA\u30F3\u30AF\u5F62\u5F0F",desc:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u3067\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u3059\u308B\u65B9\u6CD5\u3092\u9078\u629E\u3057\u307E\u3059\u3002"},onlyUpdateExisting:{name:"\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u304C\u5B58\u5728\u3059\u308B\u5834\u5408\u306E\u307F\u66F4\u65B0",desc:"\u3053\u308C\u3092\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u304C\u65E2\u306B\u5B58\u5728\u3059\u308B\u5834\u5408\u306E\u307F\u66F4\u65B0\u3055\u308C\u307E\u3059\u3002"},keepEmptyProperty:{name:"\u7A7A\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u4FDD\u6301",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u5834\u5408\u3001\u30D5\u30ED\u30F3\u30C8\u30DE\u30BF\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306F\u4FDD\u6301\u3055\u308C\u307E\u3059\u304C\u7A7A\u306E\u6587\u5B57\u5217\u306B\u8A2D\u5B9A\u3055\u308C\u307E\u3059\u3002\u7121\u52B9\u306B\u3059\u308B\u3068\u3001\u30D7\u30ED\u30D1\u30C6\u30A3\u306F\u524A\u9664\u3055\u308C\u307E\u3059\u3002"},preserveTemplateImages:{name:"\u65E2\u5B58\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u30AF\u30EA\u30A2\u3057\u306A\u3044",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306B\u753B\u50CF\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u5834\u5408\u3001\u65E2\u5B58\u306E\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u4FDD\u6301\u3057\u307E\u3059\u3002\u7121\u52B9\u306B\u3059\u308B\u3068\u3001\u753B\u50CF\u304C\u691C\u51FA\u3055\u308C\u306A\u3044\u5834\u5408\u3001\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u30AF\u30EA\u30A2\u307E\u305F\u306F\u524A\u9664\u3057\u307E\u3059\uFF08\u300C\u7A7A\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u4FDD\u6301\u300D\u8A2D\u5B9A\u306B\u4F9D\u5B58\uFF09\u3002"},requireExclamationForYouTube:{name:"YouTube\u30B5\u30E0\u30CD\u30A4\u30EB\u306B\u611F\u5606\u7B26\u304C\u5FC5\u8981",desc:"\u6709\u52B9\u306B\u3059\u308B\u3068\u3001\u611F\u5606\u7B26\u304C\u524D\u306B\u4ED8\u3044\u305FYouTube\u30EA\u30F3\u30AF\u306E\u307F\u304C\u30B5\u30E0\u30CD\u30A4\u30EB\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u306E\u5BFE\u8C61\u3068\u306A\u308A\u307E\u3059\u3002"},downloadWebP:{name:"WebP\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",desc:"\u5229\u7528\u53EF\u80FD\u306A\u5834\u5408\u306FYouTube\u304B\u3089WebP\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u753B\u50CF\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3001\u305D\u3046\u3067\u306A\u3044\u5834\u5408\u306FJPG\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3002"},localImageExtensions:{name:"\u30ED\u30FC\u30AB\u30EB\u753B\u50CF\u62E1\u5F35\u5B50",desc:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u5185\u3067\u691C\u7D22\u3059\u308B\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u62E1\u5F35\u5B50\u306E\u30AB\u30F3\u30DE\u533A\u5207\u308A\u30EA\u30B9\u30C8\u3002",placeholder:"png,jpg,jpeg,gif,webp"},debugMode:{name:"\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9",desc:"\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9\u3092\u6709\u52B9\u306B\u3057\u3066\u3001\u30B3\u30F3\u30BD\u30FC\u30EB\u306B\u8A73\u7D30\u60C5\u5831\u3092\u30ED\u30B0\u51FA\u529B\u3057\u307E\u3059\u3002"},dryRun:{name:"\u30C9\u30E9\u30A4\u30E9\u30F3",desc:"\u30C9\u30E9\u30A4\u30E9\u30F3\u3092\u6709\u52B9\u306B\u3057\u3066\u3001\u30D5\u30A1\u30A4\u30EB\u3078\u306E\u5909\u66F4\u3092\u9632\u304E\u307E\u3059\u3002"}},info:{rerenderTip:"\u30D2\u30F3\u30C8\uFF1A\u914D\u7F6E\u3084\u5BF8\u6CD5\u306E\u8A2D\u5B9A\u3092\u5909\u66F4\u3057\u305F\u5F8C\u3001\u30B3\u30DE\u30F3\u30C9\u30D1\u30EC\u30C3\u30C8\u304B\u3089\u300C\u3059\u3079\u3066\u306E\u30EA\u30B5\u30A4\u30BA\u3055\u308C\u305F\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u300D\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3057\u3066\u3001\u65E2\u5B58\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u65B0\u3057\u3044\u8A2D\u5B9A\u3067\u66F4\u65B0\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}},notices:{updatingAllFiles:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u66F4\u65B0\u4E2D...",updatingFolder:"\u73FE\u5728\u306E\u30D5\u30A9\u30EB\u30C0\u306E\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u66F4\u65B0\u4E2D...",removingAllImages:"\u3059\u3079\u3066\u306E\u30D5\u30A1\u30A4\u30EB\u304B\u3089\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u524A\u9664\u4E2D...",cleaningUpUnused:"\u672A\u4F7F\u7528\u306E\u753B\u50CF\u3092\u30AF\u30EA\u30FC\u30F3\u30A2\u30C3\u30D7\u4E2D...",rerenderingThumbnails:"\u3059\u3079\u3066\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u4E2D...",completed:"\u5B8C\u4E86",noActiveFile:"\u30A2\u30AF\u30C6\u30A3\u30D6\u306A\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u307E\u305B\u3093",errorOccurred:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",featureSet:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u8A2D\u5B9A\u3057\u307E\u3057\u305F",featureUpdated:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u66F4\u65B0\u3057\u307E\u3057\u305F",featureRemoved:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u3092\u524A\u9664\u3057\u307E\u3057\u305F",featureUnchanged:"\u30A2\u30A4\u30AD\u30E3\u30C3\u30C1\u753B\u50CF\u306F\u5909\u66F4\u3055\u308C\u307E\u305B\u3093\u3067\u3057\u305F",dryRunEnabled:"\u30C9\u30E9\u30A4\u30E9\u30F3\u6709\u52B9 - \u5909\u66F4\u306F\u884C\u308F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",filesProcessed:"{count}\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u51E6\u7406\u3057\u307E\u3057\u305F",imagesDeleted:"{count}\u500B\u306E\u753B\u50CF\u3092\u524A\u9664\u3057\u307E\u3057\u305F",thumbnailsRerendered:"{count}\u500B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u518D\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3057\u307E\u3057\u305F"}};var L={commands:{updateAll:"\u5728\u6240\u6709\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\u5C5E\u6027\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",updateAllNoThumbnail:"\u5728\u6240\u6709\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",updateFolder:"\u5728\u5F53\u524D\u6587\u4EF6\u5939\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\u5C5E\u6027\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",updateFolderNoThumbnail:"\u5728\u5F53\u524D\u6587\u4EF6\u5939\u4E2D\u8BBE\u7F6E\u7279\u8272\u56FE\u7247\uFF08\u6DFB\u52A0\u6216\u66F4\u65B0\uFF09",removeAll:"\u4ECE\u6240\u6709\u6587\u4EF6\u4E2D\u5220\u9664\u7279\u8272\u56FE\u7247\u5C5E\u6027",removeAllNoThumbnail:"\u4ECE\u6240\u6709\u6587\u4EF6\u4E2D\u5220\u9664\u7279\u8272\u56FE\u7247",cleanupUnused:"\u5220\u9664\u672A\u4F7F\u7528\u7684\u4E0B\u8F7D\u56FE\u7247\u548C\u7F29\u7565\u56FE",rerenderThumbnails:"\u91CD\u65B0\u6E32\u67D3\u6240\u6709\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE"},settings:{headings:{advanced:"\u9AD8\u7EA7"},items:{showNotifications:{name:"\u663E\u793A\u901A\u77E5",desc:"\u5F53\u7279\u8272\u56FE\u7247\u88AB\u8BBE\u7F6E\u3001\u66F4\u65B0\u6216\u5220\u9664\u65F6\u663E\u793A\u901A\u77E5\u3002"},frontmatterProperty:{name:"Frontmatter \u5C5E\u6027",desc:"\u7528\u7279\u8272\u56FE\u7247\u66F4\u65B0\u7684 frontmatter \u5C5E\u6027\u540D\u79F0"},thumbnailsFolder:{name:"\u7F29\u7565\u56FE\u6587\u4EF6\u5939",desc:"\u7528\u4E8E\u4E0B\u8F7D\u7684\u7F29\u7565\u56FE\u548C\u8C03\u6574\u5927\u5C0F\u7684\u56FE\u7247\u7684\u6587\u4EF6\u5939\u3002\u5C06\u81EA\u52A8\u4E3A\u4E0D\u540C\u7684\u56FE\u7247\u7C7B\u578B\u521B\u5EFA\u5B50\u6587\u4EF6\u5939\u3002"},excludedFolders:{name:"\u6392\u9664\u7684\u6587\u4EF6\u5939",desc:"\u8981\u4ECE\u7279\u8272\u56FE\u7247\u63D2\u4EF6\u4E2D\u6392\u9664\u7684\u6587\u4EF6\u5939\u7684\u9017\u53F7\u5206\u9694\u5217\u8868\u3002"},resizeFeatureImage:{name:"\u8C03\u6574\u7279\u8272\u56FE\u7247\u5927\u5C0F",desc:"\u8C03\u6574\u7279\u8272\u56FE\u7247\u5927\u5C0F\u4EE5\u83B7\u5F97\u66F4\u597D\u7684\u6EDA\u52A8\u5217\u8868\u6216 Notebook Navigator \u7B49\u63D2\u4EF6\u7684\u6027\u80FD\u3002"},resizedThumbnailProperty:{name:"\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u5C5E\u6027\u540D\u79F0",desc:"\u7528\u4E8E\u5B58\u50A8\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u8DEF\u5F84\u7684 frontmatter \u5C5E\u6027\u540D\u79F0\u3002",placeholder:"thumbnail"},maxResizedWidth:{name:"\u6700\u5927\u8C03\u6574\u5BBD\u5EA6",desc:"\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u7684\u6700\u5927\u5BBD\u5EA6\uFF08\u50CF\u7D20\uFF09\u3002\u4F7F\u7528 0 \u8868\u793A\u65E0\u5BBD\u5EA6\u9650\u5236\u3002",placeholder:"128"},maxResizedHeight:{name:"\u6700\u5927\u8C03\u6574\u9AD8\u5EA6",desc:"\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u7684\u6700\u5927\u9AD8\u5EA6\uFF08\u50CF\u7D20\uFF09\u3002\u4F7F\u7528 0 \u8868\u793A\u65E0\u9AD8\u5EA6\u9650\u5236\u3002",placeholder:"128"},fillResizedDimensions:{name:"\u586B\u5145\u8C03\u6574\u540E\u7684\u5C3A\u5BF8",desc:"\u542F\u7528\u540E\uFF0C\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE\u5C06\u5B8C\u5168\u7B26\u5408\u6700\u5927\u5BBD\u5EA6\u548C\u9AD8\u5EA6\u6307\u5B9A\u7684\u5927\u5C0F\uFF0C\u4FDD\u6301\u7EB5\u6A2A\u6BD4\u5E76\u88C1\u526A\u4EE5\u586B\u5145\u5C3A\u5BF8\u3002"},verticalAlignment:{name:"\u5782\u76F4\u5BF9\u9F50",desc:"\u9009\u62E9\u88C1\u526A\u56FE\u7247\u7684\u5782\u76F4\u5BF9\u9F50\u65B9\u5F0F\u3002",options:{top:"\u9876\u90E8",center:"\u4E2D\u5FC3",bottom:"\u5E95\u90E8"}},horizontalAlignment:{name:"\u6C34\u5E73\u5BF9\u9F50",desc:"\u9009\u62E9\u88C1\u526A\u56FE\u7247\u7684\u6C34\u5E73\u5BF9\u9F50\u65B9\u5F0F\u3002",options:{left:"\u5DE6",center:"\u4E2D\u5FC3",right:"\u53F3"}},showAdvancedSettings:{name:"\u663E\u793A\u9AD8\u7EA7\u8BBE\u7F6E",desc:"\u5207\u6362\u4EE5\u663E\u793A\u6216\u9690\u85CF\u9AD8\u7EA7\u914D\u7F6E\u9009\u9879"},mediaLinkFormat:{name:"\u5A92\u4F53\u94FE\u63A5\u683C\u5F0F",desc:"\u9009\u62E9\u5982\u4F55\u5728 frontmatter \u4E2D\u683C\u5F0F\u5316\u7279\u8272\u56FE\u7247\u5C5E\u6027\u3002"},onlyUpdateExisting:{name:"\u4EC5\u5728 frontmatter \u5C5E\u6027\u5B58\u5728\u65F6\u66F4\u65B0",desc:"\u542F\u7528\u6B64\u9009\u9879\u4EE5\u4EC5\u5728 frontmatter \u5C5E\u6027\u5DF2\u5B58\u5728\u65F6\u66F4\u65B0\u5B83\u3002"},keepEmptyProperty:{name:"\u4FDD\u7559\u7A7A\u5C5E\u6027",desc:"\u542F\u7528\u540E\uFF0C\u5982\u679C\u627E\u4E0D\u5230\u7279\u8272\u56FE\u7247\uFF0Cfrontmatter \u5C5E\u6027\u5C06\u88AB\u4FDD\u7559\u4F46\u8BBE\u7F6E\u4E3A\u7A7A\u5B57\u7B26\u4E32\u3002\u7981\u7528\u540E\uFF0C\u5C5E\u6027\u5C06\u88AB\u5220\u9664\u3002"},preserveTemplateImages:{name:"\u4E0D\u6E05\u9664\u73B0\u6709\u5C5E\u6027",desc:'\u542F\u7528\u540E\uFF0C\u5982\u679C\u5728\u6587\u6863\u4E2D\u627E\u4E0D\u5230\u56FE\u7247\uFF0C\u5219\u4FDD\u7559\u73B0\u6709\u7684\u7279\u8272\u56FE\u7247\u5C5E\u6027\u3002\u7981\u7528\u540E\uFF0C\u5F53\u672A\u68C0\u6D4B\u5230\u56FE\u7247\u65F6\u6E05\u9664\u6216\u5220\u9664\u5C5E\u6027\uFF08\u53D6\u51B3\u4E8E"\u4FDD\u7559\u7A7A\u5C5E\u6027"\u8BBE\u7F6E\uFF09\u3002'},requireExclamationForYouTube:{name:"YouTube \u7F29\u7565\u56FE\u9700\u8981\u611F\u53F9\u53F7",desc:"\u5982\u679C\u542F\u7528\uFF0C\u53EA\u6709\u5E26\u6709\u611F\u53F9\u53F7\u524D\u7F00\u7684 YouTube \u94FE\u63A5\u624D\u4F1A\u88AB\u8003\u8651\u7528\u4E8E\u7F29\u7565\u56FE\u4E0B\u8F7D\u3002"},downloadWebP:{name:"\u4E0B\u8F7D WebP",desc:"\u5982\u679C\u53EF\u7528\uFF0C\u4ECE YouTube \u4E0B\u8F7D WebP \u7248\u672C\u7684\u56FE\u7247\uFF0C\u5426\u5219\u4E0B\u8F7D JPG\u3002"},localImageExtensions:{name:"\u672C\u5730\u56FE\u7247\u6269\u5C55\u540D",desc:"\u8981\u5728\u6587\u6863\u4E2D\u641C\u7D22\u7684\u56FE\u7247\u6587\u4EF6\u6269\u5C55\u540D\u7684\u9017\u53F7\u5206\u9694\u5217\u8868\u3002",placeholder:"png,jpg,jpeg,gif,webp"},debugMode:{name:"\u8C03\u8BD5\u6A21\u5F0F",desc:"\u542F\u7528\u8C03\u8BD5\u6A21\u5F0F\u4EE5\u5728\u63A7\u5236\u53F0\u4E2D\u8BB0\u5F55\u8BE6\u7EC6\u4FE1\u606F\u3002"},dryRun:{name:"\u8BD5\u8FD0\u884C",desc:"\u542F\u7528\u8BD5\u8FD0\u884C\u4EE5\u9632\u6B62\u5BF9\u6587\u4EF6\u8FDB\u884C\u4EFB\u4F55\u66F4\u6539\u3002"}},info:{rerenderTip:'\u63D0\u793A\uFF1A\u66F4\u6539\u5BF9\u9F50\u6216\u5C3A\u5BF8\u8BBE\u7F6E\u540E\uFF0C\u4ECE\u547D\u4EE4\u9762\u677F\u8FD0\u884C"\u91CD\u65B0\u6E32\u67D3\u6240\u6709\u8C03\u6574\u5927\u5C0F\u7684\u7F29\u7565\u56FE"\u547D\u4EE4\uFF0C\u4EE5\u4F7F\u7528\u65B0\u8BBE\u7F6E\u66F4\u65B0\u73B0\u6709\u7F29\u7565\u56FE\u3002'}},notices:{updatingAllFiles:"\u6B63\u5728\u66F4\u65B0\u6240\u6709\u6587\u4EF6\u4E2D\u7684\u7279\u8272\u56FE\u7247...",updatingFolder:"\u6B63\u5728\u66F4\u65B0\u5F53\u524D\u6587\u4EF6\u5939\u4E2D\u7684\u7279\u8272\u56FE\u7247...",removingAllImages:"\u6B63\u5728\u4ECE\u6240\u6709\u6587\u4EF6\u4E2D\u5220\u9664\u7279\u8272\u56FE\u7247...",cleaningUpUnused:"\u6B63\u5728\u6E05\u7406\u672A\u4F7F\u7528\u7684\u56FE\u7247...",rerenderingThumbnails:"\u6B63\u5728\u91CD\u65B0\u6E32\u67D3\u6240\u6709\u7F29\u7565\u56FE...",completed:"\u5DF2\u5B8C\u6210",noActiveFile:"\u6CA1\u6709\u6D3B\u52A8\u6587\u4EF6",errorOccurred:"\u53D1\u751F\u9519\u8BEF",featureSet:"\u7279\u8272\u56FE\u7247\u5DF2\u8BBE\u7F6E",featureUpdated:"\u7279\u8272\u56FE\u7247\u5DF2\u66F4\u65B0",featureRemoved:"\u7279\u8272\u56FE\u7247\u5DF2\u5220\u9664",featureUnchanged:"\u7279\u8272\u56FE\u7247\u672A\u66F4\u6539",dryRunEnabled:"\u8BD5\u8FD0\u884C\u5DF2\u542F\u7528 - \u672A\u8FDB\u884C\u4EFB\u4F55\u66F4\u6539",filesProcessed:"\u5DF2\u5904\u7406 {count} \u4E2A\u6587\u4EF6",imagesDeleted:"\u5DF2\u5220\u9664 {count} \u4E2A\u56FE\u7247",thumbnailsRerendered:"\u5DF2\u91CD\u65B0\u6E32\u67D3 {count} \u4E2A\u7F29\u7565\u56FE"}};var N={en:S,de:P,es:I,fr:U,ja:D,zh:L};function Y(){return(0,C.getLanguage)()}function H(){let v=Y();return v&&v in N?v:"en"}var l=N[H()];var y={showNotificationsOnUpdate:!0,frontmatterProperty:"feature",thumbnailsFolder:"thumbnails",excludedFolders:[],createResizedThumbnail:!0,resizedFrontmatterProperty:"thumbnail",maxResizedWidth:128,maxResizedHeight:128,fillResizedDimensions:!0,resizedVerticalAlign:"top",resizedHorizontalAlign:"center",showAdvancedSettings:!1,mediaLinkFormat:"plain",useMediaLinks:!1,onlyUpdateExisting:!1,keepEmptyProperty:!1,preserveTemplateImages:!1,requireExclamationForYouTube:!0,downloadWebP:!0,imageExtensions:["png","jpg","jpeg","gif","webp"],debugMode:!1,dryRun:!1},F=class extends w.PluginSettingTab{constructor(f,e){super(f,e),this.plugin=e}display(){let{containerEl:f}=this;f.empty(),new w.Setting(f).setName(l.settings.items.showNotifications.name).setDesc(l.settings.items.showNotifications.desc).addToggle(r=>{r.setValue(this.plugin.settings.showNotificationsOnUpdate).onChange(async s=>{this.plugin.settings.showNotificationsOnUpdate=s,await this.plugin.saveSettings()})}),new w.Setting(f).setName(l.settings.items.frontmatterProperty.name).setDesc(l.settings.items.frontmatterProperty.desc).addText(r=>r.setPlaceholder(y.frontmatterProperty).setValue(this.plugin.settings.frontmatterProperty).onChange(async s=>{this.plugin.settings.frontmatterProperty=s,await this.plugin.saveSettings()})),new w.Setting(f).setName(l.settings.items.thumbnailsFolder.name).setDesc(l.settings.items.thumbnailsFolder.desc).addText(r=>r.setPlaceholder(y.thumbnailsFolder).setValue(this.plugin.settings.thumbnailsFolder).onChange(async s=>{let u=s.trim();u?this.plugin.settings.thumbnailsFolder=u.replace(/\/$/,""):this.plugin.settings.thumbnailsFolder=y.thumbnailsFolder,await this.plugin.saveSettings()})),new w.Setting(f).setName(l.settings.items.excludedFolders.name).setDesc(l.settings.items.excludedFolders.desc).addTextArea(r=>r.setValue(this.plugin.settings.excludedFolders.join(",")).onChange(async s=>{this.plugin.settings.excludedFolders=s.split(",").map(u=>u.trim().replace(/\/$/,"")),await this.plugin.saveSettings()})),new w.Setting(f).setName(l.settings.items.resizeFeatureImage.name).setDesc(l.settings.items.resizeFeatureImage.desc).addToggle(r=>r.setValue(this.plugin.settings.createResizedThumbnail).onChange(async s=>{this.plugin.settings.createResizedThumbnail=s,await this.plugin.saveSettings(),o(s)}));let e=f.createDiv("thumbnail-settings");new w.Setting(e).setName(l.settings.items.resizedThumbnailProperty.name).setDesc(l.settings.items.resizedThumbnailProperty.desc).addText(r=>r.setPlaceholder(l.settings.items.resizedThumbnailProperty.placeholder).setValue(this.plugin.settings.resizedFrontmatterProperty).onChange(async s=>{this.plugin.settings.resizedFrontmatterProperty=s||"thumbnail",await this.plugin.saveSettings()})),new w.Setting(e).setName(l.settings.items.maxResizedWidth.name).setDesc(l.settings.items.maxResizedWidth.desc).addText(r=>r.setPlaceholder(l.settings.items.maxResizedWidth.placeholder).setValue(String(this.plugin.settings.maxResizedWidth)).onChange(async s=>{let u=parseInt(s);this.plugin.settings.maxResizedWidth=isNaN(u)?128:u,await this.plugin.saveSettings()})),new w.Setting(e).setName(l.settings.items.maxResizedHeight.name).setDesc(l.settings.items.maxResizedHeight.desc).addText(r=>r.setPlaceholder(l.settings.items.maxResizedHeight.placeholder).setValue(String(this.plugin.settings.maxResizedHeight)).onChange(async s=>{let u=parseInt(s);this.plugin.settings.maxResizedHeight=isNaN(u)?128:u,await this.plugin.saveSettings()})),new w.Setting(e).setName(l.settings.items.fillResizedDimensions.name).setDesc(l.settings.items.fillResizedDimensions.desc).addToggle(r=>r.setValue(this.plugin.settings.fillResizedDimensions).onChange(async s=>{this.plugin.settings.fillResizedDimensions=s,await this.plugin.saveSettings(),d(s)}));let t=e.createDiv("alignment-settings");new w.Setting(t).setName(l.settings.items.verticalAlignment.name).setDesc(l.settings.items.verticalAlignment.desc).addDropdown(r=>r.addOption("top",l.settings.items.verticalAlignment.options.top).addOption("center",l.settings.items.verticalAlignment.options.center).addOption("bottom",l.settings.items.verticalAlignment.options.bottom).setValue(this.plugin.settings.resizedVerticalAlign).onChange(async s=>{this.plugin.settings.resizedVerticalAlign=s,await this.plugin.saveSettings()})),new w.Setting(t).setName(l.settings.items.horizontalAlignment.name).setDesc(l.settings.items.horizontalAlignment.desc).addDropdown(r=>r.addOption("left",l.settings.items.horizontalAlignment.options.left).addOption("center",l.settings.items.horizontalAlignment.options.center).addOption("right",l.settings.items.horizontalAlignment.options.right).setValue(this.plugin.settings.resizedHorizontalAlign).onChange(async s=>{this.plugin.settings.resizedHorizontalAlign=s,await this.plugin.saveSettings()})),e.createDiv("thumbnail-info").createEl("p",{text:l.settings.info.rerenderTip,cls:"setting-item-description"}),new w.Setting(f).setName(l.settings.headings.advanced).setHeading(),new w.Setting(f).setName(l.settings.items.showAdvancedSettings.name).setDesc(l.settings.items.showAdvancedSettings.desc).addToggle(r=>r.setValue(this.plugin.settings.showAdvancedSettings).onChange(async s=>{this.plugin.settings.showAdvancedSettings=s,await this.plugin.saveSettings(),a(s)}));let n=f.createDiv("advanced-settings");n.addClass("thumbnail-settings"),new w.Setting(n).setName(l.settings.items.mediaLinkFormat.name).setDesc(l.settings.items.mediaLinkFormat.desc).addDropdown(r=>r.addOption("plain",`${this.plugin.settings.frontmatterProperty}: image.png`).addOption("wiki",`${this.plugin.settings.frontmatterProperty}: [[image.png]]`).addOption("embed",`${this.plugin.settings.frontmatterProperty}: ![[image.png]]`).setValue(this.plugin.settings.mediaLinkFormat).onChange(async s=>{this.plugin.settings.mediaLinkFormat=s,this.plugin.settings.useMediaLinks=s!=="plain",await this.plugin.saveSettings()})),new w.Setting(n).setName(l.settings.items.onlyUpdateExisting.name).setDesc(l.settings.items.onlyUpdateExisting.desc).addToggle(r=>{r.setValue(this.plugin.settings.onlyUpdateExisting).onChange(async s=>{this.plugin.settings.onlyUpdateExisting=s,await this.plugin.saveSettings()})}),new w.Setting(n).setName(l.settings.items.keepEmptyProperty.name).setDesc(l.settings.items.keepEmptyProperty.desc).addToggle(r=>{r.setValue(this.plugin.settings.keepEmptyProperty).onChange(async s=>{this.plugin.settings.keepEmptyProperty=s,await this.plugin.saveSettings()})}),new w.Setting(n).setName(l.settings.items.preserveTemplateImages.name).setDesc(l.settings.items.preserveTemplateImages.desc).addToggle(r=>{r.setValue(this.plugin.settings.preserveTemplateImages).onChange(async s=>{this.plugin.settings.preserveTemplateImages=s,await this.plugin.saveSettings()})}),new w.Setting(n).setName(l.settings.items.requireExclamationForYouTube.name).setDesc(l.settings.items.requireExclamationForYouTube.desc).addToggle(r=>r.setValue(this.plugin.settings.requireExclamationForYouTube).onChange(async s=>{this.plugin.settings.requireExclamationForYouTube=s,await this.plugin.saveSettings()})),new w.Setting(n).setName(l.settings.items.downloadWebP.name).setDesc(l.settings.items.downloadWebP.desc).addToggle(r=>{r.setValue(this.plugin.settings.downloadWebP).onChange(async s=>{this.plugin.settings.downloadWebP=s,await this.plugin.saveSettings()})}),new w.Setting(n).setName(l.settings.items.localImageExtensions.name).setDesc(l.settings.items.localImageExtensions.desc).addText(r=>r.setPlaceholder(l.settings.items.localImageExtensions.placeholder).setValue(this.plugin.settings.imageExtensions.join(",")).onChange(async s=>{let u=s.split(",").map(p=>p.trim()).filter(p=>p);u.length===0?this.plugin.settings.imageExtensions=y.imageExtensions:this.plugin.settings.imageExtensions=u,await this.plugin.saveSettings()})),new w.Setting(n).setName(l.settings.items.debugMode.name).setDesc(l.settings.items.debugMode.desc).addToggle(r=>r.setValue(this.plugin.settings.debugMode).onChange(async s=>{this.plugin.settings.debugMode=s,await this.plugin.saveSettings()})),new w.Setting(n).setName(l.settings.items.dryRun.name).setDesc(l.settings.items.dryRun.desc).addToggle(r=>r.setValue(this.plugin.settings.dryRun).onChange(async s=>{this.plugin.settings.dryRun=s,await this.plugin.saveSettings()}));let a=r=>{n.style.display=r?"block":"none"},o=r=>{e.style.display=r?"block":"none",r&&d(this.plugin.settings.fillResizedDimensions)},d=r=>{t.style.display=r?"block":"none"};a(this.plugin.settings.showAdvancedSettings),o(this.plugin.settings.createResizedThumbnail),d(this.plugin.settings.createResizedThumbnail&&this.plugin.settings.fillResizedDimensions)}};var T=require("obsidian"),z=class extends T.Modal{constructor(f,e,t,i,n=!0){super(f),this.title=e,this.message=t,this.onSubmit=i,this.showPreservationNote=n}onOpen(){let{contentEl:f,titleEl:e}=this;e.setText(this.title),f.empty(),f.createEl("p",{text:this.message}),this.showPreservationNote&&f.createEl("div",{cls:"featured-image-info"}).createEl("p",{text:"Note: The original modification dates of all files will be preserved.",cls:"featured-image-info-text"}),new T.Setting(f).addButton(t=>t.setButtonText("Cancel").onClick(()=>{this.close(),this.onSubmit(!1)})).addButton(t=>t.setButtonText("Proceed").setCta().onClick(()=>{this.close(),this.onSubmit(!0)}))}onClose(){let{contentEl:f}=this;f.empty()}};var R=require("crypto"),E=class E extends g.Plugin{constructor(){super(...arguments);this.isRunningBulkUpdate=!1;this.updatingFiles=new Set;this.canvas=null}async onload(){await this.loadSettings(),this.debugLog("Plugin loaded, debug mode:",this.settings.debugMode,"dry run:",this.settings.dryRun),this.compileRegexPatterns(),this.settings.createResizedThumbnail&&(this.canvas=document.createElement("canvas")),this.addCommand({id:"update-all",name:this.settings.createResizedThumbnail&&this.settings.resizedFrontmatterProperty?l.commands.updateAll:l.commands.updateAllNoThumbnail,callback:()=>this.updateAllFeaturedImages()}),this.addCommand({id:"update-folder",name:this.settings.createResizedThumbnail&&this.settings.resizedFrontmatterProperty?l.commands.updateFolder:l.commands.updateFolderNoThumbnail,callback:()=>this.updateFolderFeaturedImages()}),this.addCommand({id:"remove-all",name:this.settings.createResizedThumbnail&&this.settings.resizedFrontmatterProperty?l.commands.removeAll:l.commands.removeAllNoThumbnail,callback:()=>this.removeAllFeaturedImages()}),this.addCommand({id:"cleanup-unused",name:l.commands.cleanupUnused,callback:()=>this.cleanupUnusedImages()}),this.addCommand({id:"rerender-thumbnails",name:l.commands.rerenderThumbnails,callback:()=>this.rerenderAllResizedThumbnails()}),this.registerEvent(this.app.metadataCache.on("changed",e=>{e instanceof g.TFile&&e.extension==="md"&&!this.updatingFiles.has(e.path)&&!this.isRunningBulkUpdate&&this.setFeaturedImage(e)})),this.addSettingTab(new F(this.app,this))}debugLog(...e){if(this.settings.debugMode){let t=new Date().toTimeString().split(" ")[0];console.log(`${t}`,...e)}}errorLog(...e){let t=new Date().toTimeString().split(" ")[0];console.error(`${t}`,...e)}onunload(){}async loadSettings(){this.settings={...y,...await this.loadData()},this.settings.useMediaLinks&&this.settings.mediaLinkFormat==="plain"&&(this.settings.mediaLinkFormat="embed",await this.saveData(this.settings))}async saveSettings(){await this.saveData(this.settings),this.compileRegexPatterns()}async setFeaturedImage(e){let t=this.getFeatureFromFrontmatter(e),i=this.getThumbnailFromFrontmatter(e);if(this.shouldSkipProcessing(e))return!1;let n=await this.app.vault.cachedRead(e),a=await this.getFeatureFromDocument(n,t),o=i,d;return a&&a!==t&&this.settings.createResizedThumbnail?(o=await this.createThumbnail(a),this.debugLog(`THUMBNAIL GENERATED
- File: ${e.path}
- Original: ${a}
- Thumbnail: ${o}`),i&&i!==o&&(d=i)):a||(o=void 0,i&&(d=i)),t!==a||i!==o?(await this.updateFrontmatter(e,a,o),d&&await this.deleteOrphanedThumbnail(d,e),this.debugLog(`FEATURE UPDATED
- File: ${e.path}
- Current feature: ${t}
- New feature: ${a}
- Thumbnail: ${o}`),!0):!1}getFeatureFromFrontmatter(e){var n;let t=this.app.metadataCache.getFileCache(e),i=(n=t==null?void 0:t.frontmatter)==null?void 0:n[this.settings.frontmatterProperty];if(i){let a=i.match(/!?\[\[(.*?)\]\]/);return a?a[1]:i}}getThumbnailFromFrontmatter(e){var n;if(!this.settings.createResizedThumbnail)return;let t=this.app.metadataCache.getFileCache(e),i=(n=t==null?void 0:t.frontmatter)==null?void 0:n[this.settings.resizedFrontmatterProperty];if(i){let a=i.match(/!?\[\[(.*?)\]\]/);return a?a[1]:i}}shouldSkipProcessing(e){var d,r;let t=this.app.metadataCache.getFileCache(e);if(((r=(d=t==null?void 0:t.frontmatter)==null?void 0:d.tags)!=null?r:[]).includes("excalidraw"))return!0;let n=this.settings.frontmatterProperty in((t==null?void 0:t.frontmatter)||{}),a=this.settings.excludedFolders.some(s=>e.path.startsWith(`${s}/`));return this.settings.onlyUpdateExisting&&!n||a}compileRegexPatterns(){let e=this.settings.imageExtensions.join("|"),t=`!\\[\\[(?<wikiImage>[^\\]|#]+\\.(${e}))(?:[#|][^\\]]*)?\\]\\]`,i=`!\\[.*?\\]\\((?<mdImage>(?:https?:\\/\\/(?:[^)(]|\\([^)(]*\\))+|[^)(]+\\.(${e})))\\)`,a=[`${this.settings.requireExclamationForYouTube?"!":"!?"}\\[.*?\\]\\((?<youtube>https?:\\/\\/(?:www\\.)?(?:youtube\\.com|youtu\\.be)\\/\\S+)\\)`,t,i].join("|");this.combinedLineRegex=new RegExp(a,"i"),this.autoCardImageRegex=/image:\s*(?<autoCardImage>.+?)(?:\n|$)/i,this.codeBlockStartRegex=/^[\s]*```[\s]*(\w+)?[\s]*$/}async getFeatureFromDocument(e,t){var r,s,u,p;let i=e;if(e.startsWith(`---
`)){let h=e.indexOf(`
---
`,4);h!==-1&&(i=e.substring(h+5))}let n=i.split(`
`),a=!1,o="",d="";for(let h of n){let m=this.codeBlockStartRegex.exec(h);if(m)if(a){if(o==="cardlink"){let b=this.autoCardImageRegex.exec(d);if((r=b==null?void 0:b.groups)!=null&&r.autoCardImage)return await this.processAutoCardLinkImage(b.groups.autoCardImage)}a=!1,o="";continue}else{a=!0,o=(m[1]||"").toLowerCase(),d="";continue}if(a&&o==="cardlink"){d+=`${h}
`;continue}let c=this.combinedLineRegex.exec(h);if(c){if((s=c.groups)!=null&&s.youtube){let b=this.getVideoId(c.groups.youtube);if(b)return await this.downloadThumbnail(b,t);continue}if((u=c.groups)!=null&&u.wikiImage)return decodeURIComponent(c.groups.wikiImage);if((p=c.groups)!=null&&p.mdImage){let b=decodeURIComponent(c.groups.mdImage);return this.isValidUrl(b)?await this.downloadExternalImage(b):b}}}if(this.settings.preserveTemplateImages&&t)return this.debugLog("No new image found, preserving existing featured image:",t),t}async processAutoCardLinkImage(e){if(e=e.trim(),e.startsWith('"')&&e.endsWith('"')){let t=e.slice(1,-1).trim();if(t=t.replace(/^\[\[|\]\]$/g,""),!await this.app.vault.adapter.exists(t)){this.errorLog("Local image not found:",t);return}return t}if(!this.isValidUrl(e)){this.errorLog("Invalid Auto Card Link URL:",e);return}return await this.downloadExternalImage(e,"autocardlink")}async downloadExternalImage(e,t="external"){let i=(0,g.normalizePath)(`${this.settings.thumbnailsFolder}/${t}`),n=this.generateHashedFilenameFromUrl(e);if(!n){this.errorLog("Failed to generate hashed filename for:",e);return}let a=`${i}/${n}.failed.png`;if(await this.app.vault.adapter.exists(a)){let o=await this.app.vault.adapter.stat(a);if(!o)return;let d=Date.now()-o.mtime,r=720*60*1e3;if(d<r)return this.debugLog("Skipping recently failed download:",e),a;this.debugLog("Retrying old failed download:",e);try{await this.app.vault.adapter.remove(a)}catch(s){this.errorLog("Failed to remove old failed marker:",s)}}if(this.settings.dryRun)return this.debugLog("Dry run: Skipping image download, using mock path"),`${i}/${n}.jpg`;try{await this.app.vault.adapter.exists(i)||await this.app.vault.adapter.mkdir(i);let o=await this.findExistingImageFile(i,n);if(o)return o;let d=await(0,g.requestUrl)({url:e,method:"GET"}),r=d.headers["content-type"],s=this.getExtensionFromContentType(r);if(!s)throw new Error(`Unknown Content-Type for image: ${r}`);let u=`${i}/${n}.${s}`;return await this.app.vault.adapter.writeBinary(u,d.arrayBuffer),u}catch(o){this.errorLog("Failed to download image, error:",o);try{return await this.app.vault.adapter.writeBinary(a,E.FAILED_IMAGE_DATA.buffer),a}catch(d){this.errorLog("Failed to write placeholder image:",d);return}}}async findExistingImageFile(e,t){let i=["jpg","jpeg","png","gif","webp","svg"];for(let n of i){let a=`${e}/${t}.${n}`;if(await this.app.vault.adapter.exists(a))return a}}async createThumbnail(e){if(!(!this.settings.createResizedThumbnail||this.settings.maxResizedWidth===0&&this.settings.maxResizedHeight===0))try{if(!await this.app.vault.adapter.exists(e)){this.errorLog("Source image not found:",e);return}let t=(0,R.createHash)("md5").update(`${this.settings.maxResizedWidth}_${this.settings.maxResizedHeight}_${this.settings.fillResizedDimensions}`).digest("hex").substring(0,8),n=`${(0,R.createHash)("md5").update(e).digest("hex")}_${t}`,a=(0,g.normalizePath)(`${this.settings.thumbnailsFolder}/resized`),o=`${a}/${n}.jpg`;if(await this.app.vault.adapter.exists(o))return this.debugLog("Resized thumbnail already exists:",o),o;if(this.settings.dryRun)return this.debugLog("Dry run: Skipping thumbnail creation, using mock path"),o;await this.app.vault.adapter.exists(a)||await this.app.vault.adapter.mkdir(a);let d=await this.app.vault.adapter.readBinary(e),r=new Blob([d]),s=URL.createObjectURL(r),u=await this.loadImage(s);this.canvas||(this.canvas=document.createElement("canvas"));let{width:p,height:h}=this.calculateThumbnailDimensions(u.width,u.height,this.settings.maxResizedWidth,this.settings.maxResizedHeight,this.settings.fillResizedDimensions),m=await this.resizeImage(u,p,h,this.settings.fillResizedDimensions);return await this.app.vault.adapter.writeBinary(o,m),URL.revokeObjectURL(s),o}catch(t){this.errorLog("Error creating thumbnail:",t);return}}loadImage(e){return new Promise((t,i)=>{let n=new Image;n.onload=()=>t(n),n.onerror=a=>i(a),n.src=e})}calculateThumbnailDimensions(e,t,i,n,a){let o=e,d=t;if(i===0&&n===0)return{width:o,height:d};if(a&&i>0&&n>0)return{width:i,height:n};let r=e/t;return i>0&&n>0?(e>i||t>n)&&(i/n>r?(d=n,o=Math.round(d*r)):(o=i,d=Math.round(o/r))):i>0?e>i&&(o=i,d=Math.round(o/r)):n>0&&t>n&&(d=n,o=Math.round(d*r)),{width:o,height:d}}resizeImage(e,t,i,n=!1){return new Promise((a,o)=>{try{let d=this.canvas;if(!d){o(new Error("Canvas not initialized"));return}d.width=t,d.height=i;let r=d.getContext("2d");if(!r){o(new Error("Failed to get canvas context"));return}let s=0,u=0,p=e.width,h=e.height;if(n){let m=t/i,c=e.width/e.height;if(c>m)switch(p=e.height*m,this.settings.resizedHorizontalAlign){case"left":s=0;break;case"right":s=e.width-p;break;case"center":default:s=(e.width-p)/2;break}else if(c<m)switch(h=e.width/m,this.settings.resizedVerticalAlign){case"top":u=0;break;case"bottom":u=e.height-h;break;case"center":default:u=(e.height-h)/2;break}}r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(e,s,u,p,h,0,0,t,i),d.toBlob(m=>{if(!m){o(new Error("Failed to create blob from canvas"));return}let c=new FileReader;c.onloadend=()=>{c.result instanceof ArrayBuffer?a(c.result):o(new Error("Failed to convert blob to array buffer"))},c.onerror=o,c.readAsArrayBuffer(m)},"image/jpeg",.85)}catch(d){o(d)}})}getExtensionFromContentType(e){let t={"image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp","image/svg+xml":"svg"},i=e.split(";")[0].trim().toLowerCase();return t[i]}isValidUrl(e){try{return new URL(e).protocol==="https:"}catch(t){return!1}}generateHashedFilenameFromUrl(e){return(0,R.createHash)("md5").update(e).digest("hex")}async updateFrontmatter(e,t,i=void 0){this.isRunningBulkUpdate||this.updatingFiles.add(e.path);try{if(this.settings.dryRun){if(this.debugLog("Dry run: Skipping frontmatter update"),!this.isRunningBulkUpdate&&this.settings.showNotificationsOnUpdate){let n=t?`Dry run: Would change featured image to: ${t}`:"Dry run: Would remove featured image";new g.Notice(n)}}else if(await this.app.fileManager.processFrontMatter(e,n=>{if(t){let a=t;switch(this.settings.mediaLinkFormat){case"wiki":a=`[[${t}]]`;break;case"embed":a=`![[${t}]]`;break}n[this.settings.frontmatterProperty]=a}else this.settings.keepEmptyProperty?n[this.settings.frontmatterProperty]="":delete n[this.settings.frontmatterProperty];if(this.settings.createResizedThumbnail)if(i){let a=i;switch(this.settings.mediaLinkFormat){case"wiki":a=`[[${i}]]`;break;case"embed":a=`![[${i}]]`;break}n[this.settings.resizedFrontmatterProperty]=a}else this.settings.keepEmptyProperty?n[this.settings.resizedFrontmatterProperty]="":delete n[this.settings.resizedFrontmatterProperty]}),!this.isRunningBulkUpdate&&this.settings.showNotificationsOnUpdate){let n=t?`Featured image set to ${t}`:"Featured image removed";new g.Notice(n)}}finally{this.isRunningBulkUpdate||setTimeout(()=>{this.updatingFiles.delete(e.path)},100)}}async downloadThumbnail(e,t){let i=(0,g.normalizePath)(`${this.settings.thumbnailsFolder}/youtube`),n=`${i}/${e}`;if(t&&t.startsWith(n))return t;await this.app.vault.adapter.exists(i)||await this.app.vault.adapter.mkdir(i);let a=`${e}.webp`,o=`${i}/${a}`;if(await this.app.vault.adapter.exists(o))return o;let d=`${e}.jpg`,r=`${i}/${d}`;if(await this.app.vault.adapter.exists(r))return r;if(this.settings.dryRun)return this.debugLog("Dry run: Skipping thumbnail download, using mock path"),`${i}/${e}.webp`;if(this.settings.downloadWebP)try{let s=await this.fetchThumbnail(e,"maxresdefault.webp");if((s==null?void 0:s.status)===200)return await this.app.vault.adapter.writeBinary(o,s.arrayBuffer),o}catch(s){this.debugLog("Failed to download WebP thumbnail")}try{let s=await this.fetchThumbnail(e,"maxresdefault.jpg");if((s==null?void 0:s.status)===200)return await this.app.vault.adapter.writeBinary(r,s.arrayBuffer),r}catch(s){this.debugLog("Failed to download maxresdefault.jpg")}try{let s=await this.fetchThumbnail(e,"hqdefault.jpg");if((s==null?void 0:s.status)===200)return await this.app.vault.adapter.writeBinary(r,s.arrayBuffer),r}catch(s){this.debugLog("Failed to download hqdefault.jpg:",s)}this.errorLog(`Thumbnail for video ${e} could not be downloaded`)}async fetchThumbnail(e,t){let i=t.endsWith(".webp"),a=`${i?"https://i.ytimg.com/vi_webp":"https://img.youtube.com/vi"}/${e}/${t}`;if(!this.isValidUrl(a))throw new Error(`Invalid YouTube thumbnail URL: ${a}`);return await(0,g.requestUrl)({url:a,method:"GET",headers:{Accept:i?"image/webp":"image/jpeg"}})}getVideoId(e){try{let t=new URL(e),i=t.hostname,n=t.pathname,a=t.searchParams,o=i.replace("m.youtube.com","youtube.com");if(i.includes("youtu.be"))return n.slice(1);if(o.includes("youtube.com")){if(n==="/watch")return a.get("v");if(n.startsWith("/embed/")||n.startsWith("/v/")||n.startsWith("/shorts/"))return n.split("/")[2];if(n==="/playlist")return a.get("v")}return null}catch(t){return this.errorLog("Invalid YouTube URL:",e),null}}async updateAllFeaturedImages(){if(!await this.showConfirmationModal("Update all featured images","This will scan all markdown files in your vault and update or add featured images based on the first image, YouTube link, or Auto Card Link image found in each file. Proceed?"))return;let t=this.app.vault.getMarkdownFiles();await this.processFilesWithProgress(t,"bulk update of featured images","updating featured images")}async updateFolderFeaturedImages(){var o;let e=this.app.workspace.getActiveFile();if(!e){new g.Notice("No file is currently active");return}let t=((o=e.parent)==null?void 0:o.path)||"/";if(!await this.showConfirmationModal("Update folder featured images",`This will scan all markdown files in "${t}" and its subfolders, and update or add featured images based on the first image, YouTube link, or Auto Card Link image found in each file. Proceed?`))return;let a=this.app.vault.getMarkdownFiles().filter(d=>t==="/"?!0:d.path.startsWith(`${t}/`));await this.processFilesWithProgress(a,"bulk update of featured images in folder","updating featured images")}async processFilesWithProgress(e,t,i){this.isRunningBulkUpdate=!0;let n=5;new g.Notice(`Starting ${this.settings.dryRun?"dry run of ":""}${t}...`);let a=0,o=0,d=e.length,r=Date.now();try{for(let s=0;s<e.length;s+=n){let u=e.slice(s,s+n),p=await Promise.all(u.map(async m=>{try{let c=m.stat.mtime,b=await this.setFeaturedImage(m);return b&&!this.settings.dryRun&&await this.app.vault.modify(m,await this.app.vault.read(m),{mtime:c}),{success:!0,updated:b}}catch(c){return this.errorLog(`Error processing file ${m.path}:`,c),{success:!1,updated:!1}}}));a+=p.filter(m=>m.success&&m.updated).length,o+=p.filter(m=>!m.success).length;let h=Date.now();if(h-r>=5e3){let m=`Processed ${s+u.length} of ${d} files. Updated ${a} featured images`;o>0&&(m+=`. Errors: ${o}`),new g.Notice(m),r=h}}}finally{setTimeout(()=>{this.isRunningBulkUpdate=!1;let s=`Finished ${this.settings.dryRun?"dry run of ":""}${i}. Updated: ${a} files`;o>0&&(s+=`. Errors: ${o}`),new g.Notice(s)},100)}}async removeAllFeaturedImages(){let e=`This will remove the "${this.settings.frontmatterProperty}" property from the frontmatter of all markdown files in your vault`;if(this.settings.createResizedThumbnail&&(e+=` and the "${this.settings.resizedFrontmatterProperty}" property if present`),e+=". Proceed?",!await this.showConfirmationModal("Remove all featured images",e))return;this.isRunningBulkUpdate=!0,new g.Notice(`Starting ${this.settings.dryRun?"dry run of ":""}removal of featured images from all files...`);let i=this.app.vault.getMarkdownFiles(),n=0;for(let a of i){let o=this.getFeatureFromFrontmatter(a),d=a.stat.mtime,r=await this.removeFeaturedImage(a,o);r&&!this.settings.dryRun&&await this.app.vault.modify(a,await this.app.vault.read(a),{mtime:d}),r&&n++}setTimeout(()=>{this.isRunningBulkUpdate=!1;let a=`Finished ${this.settings.dryRun?"dry run of ":""}removing featured images from ${n} files.`;new g.Notice(a)},100)}async removeFeaturedImage(e,t){if(!t)return!1;if(this.settings.preserveTemplateImages)return this.debugLog("Preserving existing featured image:",t),!1;let i=this.getThumbnailFromFrontmatter(e);return this.debugLog(`FEATURE REMOVED
- File: `,e.path),await this.updateFrontmatter(e,void 0,void 0),i&&await this.deleteOrphanedThumbnail(i,e),!0}async showConfirmationModal(e,t,i=!0){return new Promise(n=>{new z(this.app,e,t,a=>{n(a)},i).open()})}async cleanupUnusedImages(){this.debugLog("Starting cleanup of unused images"),new g.Notice("Scanning for unused images...");let e=0,t=0,i=0,n=0,a=0,o=new Set,d=new Set,r=new Set,s=new Set,u=new Set;try{await this.collectImageFiles(o,d,r,s),this.debugLog(`Collected image files:
                - External: ${o.size}
                - YouTube: ${d.size}
                - Auto Card: ${r.size}
                - Resized Thumbnails: ${s.size}`),await this.buildReferenceMap(u),this.debugLog(`Found ${u.size} unique file references in notes`);let p=this.findUnusedFiles(o,u),h=this.findUnusedFiles(d,u),m=this.findUnusedFiles(r,u),c=this.findUnusedFiles(s,u);e=p.size,t=h.size,i=m.size,n=c.size;let b=e+t+i+n;if(b===0){new g.Notice("No unused images found.");return}if(!await this.showConfirmationModal("Remove unused images",`Found ${b} unused images. Do you want to delete these files?`,!1)){new g.Notice("Cleanup cancelled.");return}if(this.settings.dryRun){this.debugLog("Dry run: Would delete unused files"),new g.Notice(`Dry run: Would delete ${b} unused files.`);return}new g.Notice(`Deleting ${b} unused files...`),a=await this.calculateFileSizes([...p,...h,...m,...c]),await this.deleteUnusedFiles(p,"external images"),await this.deleteUnusedFiles(h,"YouTube thumbnails"),await this.deleteUnusedFiles(m,"Auto Card Link images"),await this.deleteUnusedFiles(c,"resized thumbnails");let $=(a/(1024*1024)).toFixed(2);new g.Notice(`Cleanup complete. Deleted ${b} unused files (${$} MB).`)}catch(p){this.errorLog("Error during image cleanup:",p),new g.Notice("Error during image cleanup. Check console for details.")}}async collectImageFiles(e,t,i,n){let a=(0,g.normalizePath)(this.settings.thumbnailsFolder);if(!await this.app.vault.adapter.exists(a)){this.debugLog(`Thumbnail folder ${a} does not exist`);return}let o=`${a}/external`,d=`${a}/youtube`,r=`${a}/autocardlink`,s=`${a}/resized`;await this.app.vault.adapter.exists(o)&&await this.collectFilesInFolder(o,e,".failed.png"),await this.app.vault.adapter.exists(d)&&await this.collectFilesInFolder(d,t,".failed.png"),await this.app.vault.adapter.exists(r)&&await this.collectFilesInFolder(r,i,".failed.png"),await this.app.vault.adapter.exists(s)&&await this.collectFilesInFolder(s,n,".failed.png")}async collectFilesInFolder(e,t,i){try{let n=await this.app.vault.adapter.list(e);for(let a of n.files)a.endsWith(i)||t.add(a);for(let a of n.folders)await this.collectFilesInFolder(a,t,i)}catch(n){this.errorLog(`Error collecting files in ${e}:`,n)}}async buildReferenceMap(e){let t=this.app.vault.getMarkdownFiles();for(let i of t)await this.processFileReferences(i,e)}async processFileReferences(e,t){var i,n,a;try{let o=this.app.metadataCache.getFileCache(e);if(o!=null&&o.frontmatter){let h=o.frontmatter[this.settings.frontmatterProperty];if(h&&this.addNormalizedPath(h,t),this.settings.createResizedThumbnail){let m=o.frontmatter[this.settings.resizedFrontmatterProperty];m&&this.addNormalizedPath(m,t)}}let r=(await this.app.vault.cachedRead(e)).split(`
`);for(let h of r){let m=this.combinedLineRegex.exec(h);if(m&&((i=m.groups)!=null&&i.wikiImage&&this.addNormalizedPath(m.groups.wikiImage,t),(n=m.groups)!=null&&n.mdImage)){let c=decodeURIComponent(m.groups.mdImage);this.isValidUrl(c)||this.addNormalizedPath(c,t)}}let s=!1,u="",p="";for(let h of r){let m=this.codeBlockStartRegex.exec(h);if(m)if(s){if(u==="cardlink"){let c=this.autoCardImageRegex.exec(p);if((a=c==null?void 0:c.groups)!=null&&a.autoCardImage){let b=c.groups.autoCardImage.trim();if(b.startsWith('"')&&b.endsWith('"')){let x=b.slice(1,-1).trim();this.addNormalizedPath(x,t)}}}s=!1,u="";continue}else{s=!0,u=(m[1]||"").toLowerCase(),p="";continue}s&&u==="cardlink"&&(p+=`${h}
`)}}catch(o){this.errorLog(`Error processing references in ${e.path}:`,o)}}addNormalizedPath(e,t){let i=e,n=e.match(/!?\[\[(.*?)\]\]/);n&&(i=n[1]),i=i.split("|")[0].split("#")[0],i=(0,g.normalizePath)(i),t.add(i)}findUnusedFiles(e,t){let i=new Set;for(let n of e)this.isFileReferenced(n,t)||i.add(n);return i}isFileReferenced(e,t){if(t.has(e))return!0;let i=e.split("/").pop()||"";for(let n of t){let a=n.split("/").pop()||"";if(i===a)return!0}return!1}async calculateFileSizes(e){let t=0;for(let i of e)try{let n=await this.app.vault.adapter.stat(i);n&&(t+=n.size)}catch(n){this.errorLog(`Error getting file size for ${i}:`,n)}return t}async deleteUnusedFiles(e,t){let i=0;for(let n of e)try{await this.app.vault.adapter.remove(n),i++}catch(a){this.errorLog(`Error deleting file ${n}:`,a)}this.debugLog(`Deleted ${i} unused ${t}`)}async rerenderAllResizedThumbnails(){if(!this.settings.createResizedThumbnail){new g.Notice("Resized thumbnails are not enabled in settings.");return}if(!await this.showConfirmationModal("Re-render all resized thumbnails","This will re-render all resized thumbnails based on your current settings (size, alignment, etc.). This operation may take some time depending on the number of images. Proceed?"))return;this.isRunningBulkUpdate=!0,new g.Notice(`Starting ${this.settings.dryRun?"dry run of ":""}re-rendering of all resized thumbnails...`);let t=this.app.vault.getMarkdownFiles(),i=0,n=0,a=0,o=Date.now();try{let d=[];for(let u of t){let p=this.getFeatureFromFrontmatter(u);p&&(d.push({file:u,feature:p}),i++)}let r=(0,g.normalizePath)(`${this.settings.thumbnailsFolder}/resized`);if(await this.app.vault.adapter.exists(r))try{let u=await this.app.vault.adapter.list(r);if(!this.settings.dryRun)for(let p of u.files)try{await this.app.vault.adapter.remove(p)}catch(h){this.errorLog(`Failed to delete thumbnail: ${p}`,h)}this.debugLog(`Cleared ${u.files.length} existing thumbnails from ${r}`)}catch(u){this.errorLog(`Error accessing resized folder: ${r}`,u)}let s=5;for(let u=0;u<d.length;u+=s){let p=d.slice(u,u+s),h=await Promise.all(p.map(async({file:c,feature:b})=>{try{let x=await this.createThumbnail(b);return x?(await this.updateFrontmatter(c,b,x),this.debugLog(`THUMBNAIL UPDATED
- File: ${c.path}
- Feature: ${b}
- New thumbnail: ${x}`),!0):!1}catch(x){return this.errorLog(`Error re-rendering thumbnail for ${c.path}:`,x),!1}}));n+=h.filter(c=>c).length,a+=h.filter(c=>!c).length;let m=Date.now();if(m-o>=5e3){let c=`Re-rendering thumbnails: ${u+p.length}/${i} processed. Updated: ${n}`;a>0&&(c+=`. Errors: ${a}`),new g.Notice(c),o=m}}}finally{this.isRunningBulkUpdate=!1;let d=`Re-rendering complete. ${n} thumbnails were updated`;a>0&&(d+=`. There were ${a} errors.`),new g.Notice(d)}}async isThumbnailUsedElsewhere(e,t){if(!e)return!1;let i=(0,g.normalizePath)(e),n=this.app.vault.getMarkdownFiles();for(let a of n){if(t&&a.path===t.path)continue;let o=this.app.metadataCache.getFileCache(a);if(o!=null&&o.frontmatter){let d=o.frontmatter[this.settings.resizedFrontmatterProperty];if(d){let r=d.match(/!?\[\[(.*?)\]\]/),s=r?r[1]:d;if((0,g.normalizePath)(s)===i)return!0}}}return!1}async deleteOrphanedThumbnail(e,t){if(!e)return;let i=(0,g.normalizePath)(e),n=(0,g.normalizePath)(`${this.settings.thumbnailsFolder}/resized`);if(!i.startsWith(n)||!await this.app.vault.adapter.exists(e))return;if(!await this.isThumbnailUsedElsewhere(e,t))try{await this.app.vault.adapter.remove(e),this.debugLog("Deleted orphaned thumbnail:",e)}catch(o){this.errorLog("Failed to delete orphaned thumbnail:",e,o)}}};E.FAILED_IMAGE_DATA=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,8,6,0,0,0,31,21,196,137,0,0,0,10,73,68,65,84,120,156,99,0,0,0,2,0,1,229,39,222,252,0,0,0,0,73,69,78,68,174,66,96,130]);var k=E;

/* nosourcemap */